from glob import glob
import inspect
import sys
import os
from importlib.machinery import SourceFileLoader

models = dict()

for path in glob(os.path.join(os.path.dirname(os.path.abspath(__file__)), "*.py")):
    _, f = os.path.split(path)
    if f == "__init__.py":
        continue
    model = f[:-3]
    print(model)
    module = SourceFileLoader(model, path).load_module()
    classes = inspect.getmembers(module, inspect.isclass)
    model_class = None
    for c in classes:
        if isinstance(c[1], object):  # should be BaseComponent
            model_class = c[1]
    models[model] = model_class
    print(model_class)
